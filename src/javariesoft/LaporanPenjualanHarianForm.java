/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * LaporanPenjualanHarianForm.java
 *
 * Created on Dec 31, 2011, 3:45:06 PM
 */
package javariesoft;

import com.erv.db.koneksi;
import java.awt.Cursor;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.sql.Connection;
import java.sql.SQLException;
import java.text.SimpleDateFormat;
import java.util.HashMap;
import net.sf.jasperreports.engine.JRException;
import net.sf.jasperreports.engine.JasperFillManager;
import net.sf.jasperreports.engine.JasperPrint;
import net.sf.jasperreports.view.JasperViewer;

/**
 *
 * @author erwadi
 */
public class LaporanPenjualanHarianForm extends javax.swing.JInternalFrame {

    java.text.DateFormat d = new SimpleDateFormat("yyyy-MM-dd");

    /**
     * Creates new form LaporanPenjualanHarianForm
     */
    public LaporanPenjualanHarianForm() {
        initComponents();
        tgl1.setDateFormat(d);
        tgl2.setDateFormat(d);
        kosongForm();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        tgl1 = new datechooser.beans.DateChooserCombo();
        jLabel2 = new javax.swing.JLabel();
        tgl2 = new datechooser.beans.DateChooserCombo();
        btnOk = new javax.swing.JButton();
        btnKeluar = new javax.swing.JButton();
        jLabel3 = new javax.swing.JLabel();
        cbPembayaran = new javax.swing.JComboBox();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        OptTanggal = new javax.swing.JCheckBox();
        cbOpsiFaktur = new javax.swing.JComboBox();
        OptPembayaran = new javax.swing.JCheckBox();
        OptOpsiFaktur = new javax.swing.JCheckBox();

        org.jdesktop.application.ResourceMap resourceMap = org.jdesktop.application.Application.getInstance(javariesoft.JavarieSoftApp.class).getContext().getResourceMap(LaporanPenjualanHarianForm.class);
        setTitle(resourceMap.getString("Form.title")); // NOI18N
        setName("Form"); // NOI18N
        getContentPane().setLayout(null);

        jLabel1.setFont(resourceMap.getFont("jLabel1.font")); // NOI18N
        jLabel1.setText(resourceMap.getString("jLabel1.text")); // NOI18N
        jLabel1.setName("jLabel1"); // NOI18N
        getContentPane().add(jLabel1);
        jLabel1.setBounds(20, 70, 80, 20);

        tgl1.setFieldFont(resourceMap.getFont("tgl1.dch_combo_fieldFont")); // NOI18N
        getContentPane().add(tgl1);
        tgl1.setBounds(150, 40, 130, 20);

        jLabel2.setFont(resourceMap.getFont("jLabel2.font")); // NOI18N
        jLabel2.setText(resourceMap.getString("jLabel2.text")); // NOI18N
        jLabel2.setName("jLabel2"); // NOI18N
        getContentPane().add(jLabel2);
        jLabel2.setBounds(290, 40, 30, 16);

        tgl2.setFieldFont(resourceMap.getFont("tgl2.dch_combo_fieldFont")); // NOI18N
        getContentPane().add(tgl2);
        tgl2.setBounds(320, 40, 130, 20);

        btnOk.setFont(resourceMap.getFont("btnOk.font")); // NOI18N
        btnOk.setIcon(resourceMap.getIcon("btnOk.icon")); // NOI18N
        btnOk.setText(resourceMap.getString("btnOk.text")); // NOI18N
        btnOk.setName("btnOk"); // NOI18N
        btnOk.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnOkActionPerformed(evt);
            }
        });
        getContentPane().add(btnOk);
        btnOk.setBounds(30, 170, 170, 40);

        btnKeluar.setFont(resourceMap.getFont("btnKeluar.font")); // NOI18N
        btnKeluar.setIcon(resourceMap.getIcon("btnKeluar.icon")); // NOI18N
        btnKeluar.setText(resourceMap.getString("btnKeluar.text")); // NOI18N
        btnKeluar.setName("btnKeluar"); // NOI18N
        btnKeluar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnKeluarActionPerformed(evt);
            }
        });
        getContentPane().add(btnKeluar);
        btnKeluar.setBounds(220, 170, 170, 40);

        jLabel3.setFont(resourceMap.getFont("jLabel3.font")); // NOI18N
        jLabel3.setText(resourceMap.getString("jLabel3.text")); // NOI18N
        jLabel3.setName("jLabel3"); // NOI18N
        getContentPane().add(jLabel3);
        jLabel3.setBounds(20, 100, 80, 20);

        cbPembayaran.setFont(resourceMap.getFont("cbPembayaran.font")); // NOI18N
        cbPembayaran.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Tunai", "Kredit", "Bank" }));
        cbPembayaran.setName("cbPembayaran"); // NOI18N
        getContentPane().add(cbPembayaran);
        cbPembayaran.setBounds(150, 100, 150, 20);

        jLabel4.setFont(resourceMap.getFont("jLabel4.font")); // NOI18N
        jLabel4.setText(resourceMap.getString("jLabel4.text")); // NOI18N
        jLabel4.setName("jLabel4"); // NOI18N
        getContentPane().add(jLabel4);
        jLabel4.setBounds(20, 40, 80, 20);

        jLabel5.setFont(resourceMap.getFont("jLabel5.font")); // NOI18N
        jLabel5.setText(resourceMap.getString("jLabel5.text")); // NOI18N
        jLabel5.setName("jLabel5"); // NOI18N
        getContentPane().add(jLabel5);
        jLabel5.setBounds(20, 10, 140, 15);

        OptTanggal.setFont(resourceMap.getFont("OptTanggal.font")); // NOI18N
        OptTanggal.setText(resourceMap.getString("OptTanggal.text")); // NOI18N
        OptTanggal.setEnabled(false);
        OptTanggal.setName("OptTanggal"); // NOI18N
        getContentPane().add(OptTanggal);
        OptTanggal.setBounds(150, 7, 81, 23);

        cbOpsiFaktur.setFont(resourceMap.getFont("cbOpsiFaktur.font")); // NOI18N
        cbOpsiFaktur.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Pajak", "Non Pajak" }));
        cbOpsiFaktur.setName("cbOpsiFaktur"); // NOI18N
        getContentPane().add(cbOpsiFaktur);
        cbOpsiFaktur.setBounds(150, 70, 150, 20);

        OptPembayaran.setFont(resourceMap.getFont("OptPembayaran.font")); // NOI18N
        OptPembayaran.setText(resourceMap.getString("OptPembayaran.text")); // NOI18N
        OptPembayaran.setName("OptPembayaran"); // NOI18N
        getContentPane().add(OptPembayaran);
        OptPembayaran.setBounds(350, 7, 110, 25);

        OptOpsiFaktur.setFont(resourceMap.getFont("OptOpsiFaktur.font")); // NOI18N
        OptOpsiFaktur.setText(resourceMap.getString("OptOpsiFaktur.text")); // NOI18N
        OptOpsiFaktur.setName("OptOpsiFaktur"); // NOI18N
        getContentPane().add(OptOpsiFaktur);
        OptOpsiFaktur.setBounds(240, 7, 100, 25);

        setBounds(0, 0, 503, 255);
    }// </editor-fold>//GEN-END:initComponents

private void btnOkActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnOkActionPerformed
// TODO add your handling code here:
    this.setCursor(new Cursor(Cursor.WAIT_CURSOR));
    HashMap parameter = new HashMap();
    JasperPrint jasperPrint = null;
    String kode="";
    try {
        Connection c = koneksi.getKoneksiJ();
        if (OptTanggal.isSelected() && OptOpsiFaktur.isSelected() && OptPembayaran.isSelected()) {
            
            if (cbPembayaran.getSelectedIndex() == 0) {
                kode = "0";
            } else if (cbPembayaran.getSelectedIndex() == 1) {
                kode = "1";
            } else if (cbPembayaran.getSelectedIndex() == 2) {
                kode = "2";
            }
            if (cbOpsiFaktur.getSelectedIndex() == 0) {
                parameter.put("tgl1", tgl1.getText());
                parameter.put("tgl2", tgl2.getText());
                parameter.put("pembayaran", kode);
                URL url = new URL(global.REPORT + "/penjualanHarianPTGLBayarPajak.jasper");
                InputStream in = url.openStream();
                jasperPrint = JasperFillManager.fillReport(in, parameter, c);
                JasperViewer.viewReport(jasperPrint, false);
            } else {
                parameter.put("tgl1", tgl1.getText());
                parameter.put("tgl2", tgl2.getText());
                parameter.put("pembayaran", kode);
                URL url = new URL(global.REPORT + "/penjualanHarianPTGLBayarNonPajak.jasper");
                InputStream in = url.openStream();
                jasperPrint = JasperFillManager.fillReport(in, parameter, c);
                JasperViewer.viewReport(jasperPrint, false);
            }
        } else if (OptTanggal.isSelected() && OptOpsiFaktur.isSelected()) {
            if (cbOpsiFaktur.getSelectedIndex() == 0) {
                parameter.put("tgl1", tgl1.getText());
                parameter.put("tgl2", tgl2.getText());
                URL url = new URL(global.REPORT + "/penjualanHarianPTGLPajak.jasper");
                InputStream in = url.openStream();
                jasperPrint = JasperFillManager.fillReport(in, parameter, c);
                JasperViewer.viewReport(jasperPrint, false);
            } else {
                parameter.put("tgl1", tgl1.getText());
                parameter.put("tgl2", tgl2.getText());
                URL url = new URL(global.REPORT + "/penjualanHarianPTGLNonPajak.jasper");
                InputStream in = url.openStream();
                jasperPrint = JasperFillManager.fillReport(in, parameter, c);
                JasperViewer.viewReport(jasperPrint, false);
            }

        } else if (OptTanggal.isSelected() && OptPembayaran.isSelected()) {
            if (cbPembayaran.getSelectedIndex() == 0) {
                kode = "0";
            } else if (cbPembayaran.getSelectedIndex() == 1) {
                kode = "1";
            } else if (cbPembayaran.getSelectedIndex() == 2) {
                kode = "2";
            }
            parameter.put("tgl1", tgl1.getText());
            parameter.put("tgl2", tgl2.getText());
            parameter.put("pembayaran", kode);
            URL url = new URL(global.REPORT + "/penjualanHarianPTGLBayar.jasper");
            InputStream in = url.openStream();
            jasperPrint = JasperFillManager.fillReport(in, parameter, c);
            JasperViewer.viewReport(jasperPrint, false);

        } else if (OptTanggal.isSelected()) {
            parameter.put("tgl1", tgl1.getText());
            parameter.put("tgl2", tgl2.getText());
            URL url = new URL(global.REPORT + "/penjualanHarianPTGL.jasper");
            InputStream in = url.openStream();
            jasperPrint = JasperFillManager.fillReport(in, parameter, c);
            JasperViewer.viewReport(jasperPrint, false);
        }
//        if (cbPembayaran.getSelectedItem().equals("-")) {
//            parameter.put("tgl1", tgl1.getText());
//            parameter.put("tgl2", tgl2.getText());
//            URL url = new URL(global.REPORT + "/penjualanHarian.jasper");
//            InputStream in = url.openStream();
//            jasperPrint = JasperFillManager.fillReport(in, parameter, c);
//            JasperViewer.viewReport(jasperPrint, false);
//        } else {
//            String kode = "";
//            if (cbPembayaran.getSelectedIndex() == 1) {
//                kode = "0";
//            } else if (cbPembayaran.getSelectedIndex() == 2) {
//                kode = "1";
//            } else if (cbPembayaran.getSelectedIndex() == 3) {
//                kode = "2";
//            }
//            parameter.put("tgl1", tgl1.getText());
//            parameter.put("tgl2", tgl2.getText());
//            parameter.put("pembayaran", kode);
//            URL url = new URL(global.REPORT + "/penjualanHarianFilterPembayaran.jasper");
//            InputStream in = url.openStream();
//            jasperPrint = JasperFillManager.fillReport(in, parameter, c);
//            JasperViewer.viewReport(jasperPrint, false);
//        }
        c.close();
    } catch (IOException | SQLException | JRException ex) {
        System.out.print(ex.toString());
        //Logger.getLogger(formlaporan.class.getName()).log(Level.SEVERE, null, ex);
    }
    this.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
}//GEN-LAST:event_btnOkActionPerformed

private void btnKeluarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnKeluarActionPerformed
// TODO add your handling code here:
    dispose();
}//GEN-LAST:event_btnKeluarActionPerformed

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JCheckBox OptOpsiFaktur;
    private javax.swing.JCheckBox OptPembayaran;
    private javax.swing.JCheckBox OptTanggal;
    private javax.swing.JButton btnKeluar;
    private javax.swing.JButton btnOk;
    private javax.swing.JComboBox cbOpsiFaktur;
    private javax.swing.JComboBox cbPembayaran;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private datechooser.beans.DateChooserCombo tgl1;
    private datechooser.beans.DateChooserCombo tgl2;
    // End of variables declaration//GEN-END:variables
void kosongForm() {
        OptTanggal.setSelected(true);
    }
}
